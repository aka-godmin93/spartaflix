<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>ìŠ¤íŒŒë¥´íƒ€í”Œë¦­ìŠ¤</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap");
            * {
                font-family: "Gowun Dodum", sans-serif;
            }

            .main {
                background-image: url("https://occ-0-1123-1217.1.nflxso.net/dnm/api/v6/6AYY37jfdO6hpXcMjf9Yu5cnmO0/AAAABeIfo7VL_VDyKnljV66IkR-4XLb6xpZqhpLSo3JUtbivnEW4s60PD27muH1mdaANM_8rGpgbm6L2oDgA_iELHZLZ2IQjG5lvp5d2.jpg?r=e6e.jpg");
                background-position: center;
                background-size: cover;
                margin-top: 5px;
            }

            body {
                background-color: black;
            }

            .mycards {
                width: 900px;
                margin: 20px auto 20px auto;
            }

            .mypostingbox {
                width: 500px;
                margin: 20px auto 20px auto;
                padding: 20px;
                border: 1px solid white;
                border-radius: 5px;
            }

            .form-floating input {
                background-color: transparent;
                color: white;
            }
            .form-floating label {
                color: white;
            }

            .input-group label {
                background-color: transparent;
                color: white;
            }

            .mypostingbox button {
                width: 20%;
                margin: 0 40% 0 40%;
            }

            .mycards img {
                width: 206px;
                height: 295px;
            }
        </style>

        <script type="module">
            // Firebase SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
            import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

            // Firebase êµ¬ì„± ì •ë³´ ì„¤ì •
            const firebaseConfig = {
                apiKey: "AIzaSyDo8E-l05ya8Oh8dJtlpyzZuvgQavvGhZ4",
                authDomain: "sparta-web-a-to-z.firebaseapp.com",
                projectId: "sparta-web-a-to-z",
                storageBucket: "sparta-web-a-to-z.appspot.com",
                messagingSenderId: "596040038281",
                appId: "1:596040038281:web:4317ffec5396ea7efa9358",
                measurementId: "G-T3G4HB71HH",
            };

            // Firebase ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            //ì´ìƒ íŒŒì´ì–´ë² ì´ìŠ¤ ì„¸íŒ…
            //ì´í•˜ ì‘ì—… ì‹œì‘

            $(document).ready(function () {
                let ì„œìš¸ê¸°ì˜¨url = "http://spartacodingclub.shop/sparta_api/weather/seoul";

                fetch(ì„œìš¸ê¸°ì˜¨url)
                    .then((res) => res.json())
                    .then((temp_data) => {
                        let seoul_temp = temp_data["temp"];

                        if (seoul_temp > 19) {
                            $("#temp_what").text(seoul_temp + "â„ƒ" + "  ë”ì›Œìš”ğŸ¥µ");
                        } else {
                            $("#temp_what").text(seoul_temp + "â„ƒ" + "  ì¶”ì›Œìš”ğŸ¥¶");
                        }
                    });
            });

            $("#open_close_btn").click(async function () {
                $("#new_posting").toggle();
            });
            // ì•„ë˜ ë‚´ìš©ì€ $("#open_close_btn").clickìœ¼ë¡œ ëŒ€ì²´ë˜ì—ˆìŒ.
            // function open_close() {
            //     $("#new_posting").toggle();
            // }

            $("#make_mv_card").empty();

            // ê¸°ë¡í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥¼ ì‹œ ì…ë ¥í•œ ë‚´ìš©ì„ ì„œë²„ì— ì €ì¥í•´ë¼.
            $("#posting_btn").click(async function () {
                let ìƒˆì˜í™”image = $("#mv_image").val();
                let ìƒˆì˜í™”title = $("#mv_title").val();
                let ìƒˆì˜í™”star = $("#mv_star").val();
                let ìƒˆì˜í™”comment = $("#mv_comment").val();

                let ì˜í™”ì„¸ì´ë¸Œ = {
                    image: ìƒˆì˜í™”image,
                    title: ìƒˆì˜í™”title,
                    star: ìƒˆì˜í™”star,
                    comment: ìƒˆì˜í™”comment,
                };
                await addDoc(collection(db, "movies"), ì˜í™”ì„¸ì´ë¸Œ);

                alert("ì €ì¥ ì™„ë£Œ!");
                window.location.reload();
            });

            // ì €ì¥í•œ ë‚´ìš©ì„ ê°€ì ¸ì™€ë¼.
            let docs = await getDocs(collection(db, "movies"));
            docs.forEach((ì˜í™”ì„¸ì´ë¸Œ) => {
                let ì˜í™”ë¡œë“œ = ì˜í™”ì„¸ì´ë¸Œ.data();

                let ìƒˆì˜í™”image = ì˜í™”ë¡œë“œ["image"];
                let ìƒˆì˜í™”title = ì˜í™”ë¡œë“œ["title"];
                let ìƒˆì˜í™”star = ì˜í™”ë¡œë“œ["star"];
                let ìƒˆì˜í™”comment = ì˜í™”ë¡œë“œ["comment"];

                let ìƒˆì˜í™”ì¹´ë“œ = `
                    <div class="col">
                        <div class="card h-100">
                            <img src="${ìƒˆì˜í™”image}" class="card-img-top" alt="..." />
                            <div class="card-body">
                                <h5 class="card-title">${ìƒˆì˜í™”title}</h5>
                                <p class="card-text">${ìƒˆì˜í™”star}</p>
                                <p class="card-text">${ìƒˆì˜í™”comment}</p>
                            </div>
                        </div>
                    </div>
                    `;

                $("#make_mv_card").append(ìƒˆì˜í™”ì¹´ë“œ);
            });

            // function make_card() {
            //     let ìƒˆì˜í™”image = $("#mv_image").val();
            //     let ìƒˆì˜í™”title = $("#mv_title").val();
            //     let ìƒˆì˜í™”star = $("#mv_star").val();
            //     let ìƒˆì˜í™”comment = $("#mv_comment").val();

            //     let ìƒˆì˜í™”ì¹´ë“œ = `
            //     <div class="col">
            //         <div class="card h-100">
            //             <img src="${ìƒˆì˜í™”image}" class="card-img-top" alt="..." />
            //             <div class="card-body">
            //                 <h5 class="card-title">${ìƒˆì˜í™”title}</h5>
            //                 <p class="card-text">${ìƒˆì˜í™”star}</p>
            //                 <p class="card-text">${ìƒˆì˜í™”comment}</p>
            //             </div>
            //         </div>
            //     </div>
            //     `;

            //     $("#make_mv_card").append(ìƒˆì˜í™”ì¹´ë“œ);
            // }
        </script>
    </head>

    <body>
        <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© - examples - headers -->
        <!-- í˜ì´ì§€ íƒ‘ ë©”ë‰´ë°” -->
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                <svg class="bi me-2" width="40" height="50" role="img" aria-label="Bootstrap">
                    <use xlink:href="#bootstrap"></use>
                </svg>
            </a>

            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><a href="#" class="nav-link px-2 text-danger">spartaflix</a></li>
                <li><a href="#" class="nav-link px-2 text-white">í™ˆ</a></li>
                <li><a href="#" class="nav-link px-2 text-white">ì‹œë¦¬ì¦ˆ</a></li>
                <li><a href="#" class="nav-link px-2 text-white">ì˜í™”</a></li>
                <li><a href="#" class="nav-link px-2 text-white">ë‚´ê°€ ì°œí•œ ì»¨í…ì¸ </a></li>
                <li>
                    <a href="#" class="nav-link px-2 text-white">í˜„ì¬ ê¸°ì˜¨ : <span id="temp_what"></span></a>
                </li>
            </ul>

            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
                <input type="search" class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search" />
            </form>

            <div class="text-end">
                <button type="button" class="btn btn-outline-light me-2">Login</button>
                <button type="button" class="btn btn-danger">Sign-up</button>
            </div>
        </div>

        <!-- ìƒë‹¨ í˜„ì¬ ì˜í™” ì†Œê°œë€ -->
        <div class="main">
            <div class="p-5 mb-4 bg-body-tertiary rounded-3">
                <div class="container-fluid py-5">
                    <h1 class="display-5 fw-bold">í‚¹ë¤</h1>
                    <p class="col-md-8 fs-4">ë³‘ë“  ì™•ì„ ë‘˜ëŸ¬ì‹¸ê³  í‰í‰í•œ ì†Œë¬¸ì´ ë– ëˆë‹¤. ì–´ë‘ ì— ë’¤ë®ì¸ ì¡°ì„ , ê¸°ì´í•œ ì—­ë³‘ì— ì‹ ìŒí•˜ëŠ” ì‚°í•˜. ì •ì²´ ëª¨ë¥¼ ì•…ì— ë§ì„œ ë°±ì„±ì„ êµ¬ì›í•  í¬ë§ì€ ì˜¤ì§ ì„¸ìë¿ì´ë‹¤.</p>
                    <button id="open_close_btn" type="button" class="btn btn-outline-light">ì˜í™” ê¸°ë¡í•˜ê¸°</button>
                    <button type="button" class="btn btn-outline-light">ìƒì„¸ì •ë³´</button>
                </div>
            </div>
        </div>

        <!-- ìƒˆ ì˜í™” ê¸°ë¡ ë°•ìŠ¤ -->
        <div id="new_posting" class="mypostingbox">
            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="mv_image" placeholder="ì˜í™” ì´ë¯¸ì§€ ì£¼ì†Œ" />
                <label for="floatingInput">ì˜í™” ì´ë¯¸ì§€ ì£¼ì†Œ</label>
            </div>
            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="mv_title" placeholder="ì˜í™” ì œëª©" />
                <label for="floatingInput">ì˜í™” ì œëª©</label>
            </div>

            <div class="input-group mb-3">
                <label class="input-group-text" for="inputGroupSelect01">ë³„ì </label>
                <select class="form-select" id="mv_star">
                    <option selected>ë³„ì  ì„ íƒ</option>
                    <option value="â­">â­</option>
                    <option value="â­â­">â­â­</option>
                    <option value="â­â­â­">â­â­â­</option>
                    <option value="â­â­â­â­">â­â­â­â­</option>
                    <option value="â­â­â­â­â­">â­â­â­â­â­</option>
                </select>
            </div>

            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="mv_comment" placeholder="ì¶”ì²œ ì´ìœ " />
                <label for="floatingInput">ì¶”ì²œ ì´ìœ </label>
            </div>

            <button id="posting_btn" type="button" class="btn btn-danger">ê¸°ë¡í•˜ê¸°</button>
        </div>

        <div class="mycards">
            <div id="make_mv_card" class="row row-cols-1 row-cols-md-4 g-4">
                <div class="col">
                    <div class="card h-100">
                        <img src="https://movie-phinf.pstatic.net/20210728_221/1627440327667GyoYj_JPEG/movie_image.jpg" class="card-img-top" alt="..." />
                        <div class="card-body">
                            <h5 class="card-title">ì˜í™” ì œëª©</h5>
                            <p class="card-text">â­â­â­</p>
                            <p class="card-text">ì˜í™” ì½”ë§¨íŠ¸</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://movie-phinf.pstatic.net/20210728_221/1627440327667GyoYj_JPEG/movie_image.jpg" class="card-img-top" alt="..." />
                        <div class="card-body">
                            <h5 class="card-title">ì˜í™” ì œëª©</h5>
                            <p class="card-text">â­â­â­</p>
                            <p class="card-text">ì˜í™” ì½”ë§¨íŠ¸</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://movie-phinf.pstatic.net/20210728_221/1627440327667GyoYj_JPEG/movie_image.jpg" class="card-img-top" alt="..." />
                        <div class="card-body">
                            <h5 class="card-title">ì˜í™” ì œëª©</h5>
                            <p class="card-text">â­â­â­</p>
                            <p class="card-text">ì˜í™” ì½”ë§¨íŠ¸</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://movie-phinf.pstatic.net/20210728_221/1627440327667GyoYj_JPEG/movie_image.jpg" class="card-img-top" alt="..." />
                        <div class="card-body">
                            <h5 class="card-title">ì˜í™” ì œëª©</h5>
                            <p class="card-text">â­â­â­</p>
                            <p class="card-text">ì˜í™” ì½”ë§¨íŠ¸</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
